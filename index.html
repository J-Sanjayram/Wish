<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="6hf6-UJLWlokADDSLS2-KRKJbtXt5SURuqH9pQXepFE" />
    <meta name="google-site-verification" content="6hf6-UJLWlokADDSLS2-KRKJbtXt5SURuqH9pQXepFE" />
    <meta name="google-site-verification" content="6hf6-UJLWlokADDSLS2-KRKJbtXt5SURuqH9pQXepFE" />
    <title>üéâ Birthday Wishes - Share the Joy Worldwide</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-birthday-cake"></i> Birthday Wishes</h1>
            <p>Create and share beautiful birthday messages worldwide üåç</p>
            <div style="margin-top: 15px; color: rgba(255,255,255,0.8); font-size: 0.9rem;">
                üéâ <span id="total-wishes">0</span> Wishes Created Worldwide
            </div>
        </div>

        <div class="card" id="form-card">
            <h2 style="margin-bottom: 30px; color: #333; text-align: center;">
                <i class="fas fa-gift"></i> Create a Birthday Wish
            </h2>
            
            <div class="form-group">
                <label for="fromName">From (Your Name)</label>
                <div class="input-wrapper">
                    <i class="fas fa-user"></i>
                    <input type="text" id="fromName" placeholder="Enter your name">
                </div>
            </div>

            <div class="form-group">
                <label for="toName">To (Birthday Person)</label>
                <div class="input-wrapper">
                    <i class="fas fa-birthday-cake"></i>
                    <input type="text" id="toName" placeholder="Enter birthday person's name">
                </div>
            </div>

            <div class="form-group">
                <label for="birthdayImage">Birthday Person's Photo (Optional)</label>
                <div class="image-upload-wrapper">
                    <input type="file" id="birthdayImage" accept="image/*" style="display: none;" onchange="handleImageUpload(event)">
                    <div class="image-upload-area" onclick="document.getElementById('birthdayImage').click()">
                        <div class="upload-placeholder" id="upload-placeholder">
                            <i class="fas fa-camera"></i>
                            <p>Click to add photo</p>
                            <span>JPG, PNG up to 5MB</span>
                        </div>
                        <div class="image-preview" id="image-preview" style="display: none;">
                            <img id="preview-img" src="" alt="Preview">
                            <div class="image-overlay">
                                <i class="fas fa-edit"></i>
                                <span>Change photo</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="message">Birthday Message</label>
                <div class="input-wrapper">
                    <i class="fas fa-heart"></i>
                    <textarea id="message" placeholder="Write your heartfelt birthday message..."></textarea>
                </div>
            </div>

            <button class="btn" onclick="createWish()">
                <i class="fas fa-paper-plane"></i> Create & Share Wish
            </button>
        </div>

        <div class="card success-card" id="success-card">
            <h3><i class="fas fa-check-circle"></i> Wish Created Successfully!</h3>
            <p>Your birthday wish has been created. Share this link with others:</p>
            
            <div class="share-link" id="share-link"></div>
            
            <div>
                <button class="copy-btn" onclick="copyLink()">
                    <i class="fas fa-copy"></i> Copy Link
                </button>
                <button class="copy-btn" onclick="shareWhatsApp()">
                    <i class="fab fa-whatsapp"></i> WhatsApp
                </button>
                <button class="copy-btn" onclick="createAnother()">
                    <i class="fas fa-plus"></i> Create Another
                </button>
            </div>
        </div>


    </div>

    <script>
        let wishes = [];
        
        async function loadWishes() {
            try {
                const response = await fetch('./wishes.json');
                if (response.ok) {
                    wishes = await response.json();
                }
            } catch (error) {
                wishes = [];
            }
            
            const localWishes = JSON.parse(localStorage.getItem('birthdayWishes')) || [];
            wishes = [...wishes, ...localWishes];
            wishes = wishes.filter((wish, index, self) => 
                index === self.findIndex(w => w.id === wish.id)
            );
            updateStats();
        }
        
        function saveWishLocally(wish) {
            const localWishes = JSON.parse(localStorage.getItem('birthdayWishes')) || [];
            localWishes.unshift(wish);
            localStorage.setItem('birthdayWishes', JSON.stringify(localWishes));
            wishes.unshift(wish);
        }

        let uploadedImage = null;

        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (file && file.size <= 5 * 1024 * 1024) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    uploadedImage = e.target.result;
                    document.getElementById('preview-img').src = uploadedImage;
                    document.getElementById('upload-placeholder').style.display = 'none';
                    document.getElementById('image-preview').style.display = 'block';
                };
                reader.readAsDataURL(file);
            } else {
                alert('Please select an image under 5MB');
            }
        }

        async function createWish() {
            const fromName = document.getElementById('fromName').value.trim();
            const toName = document.getElementById('toName').value.trim();
            const message = document.getElementById('message').value.trim();
            
            if (!fromName || !toName || !message) {
                alert('Please fill in all fields');
                return;
            }
            
            const wish = {
                id: Date.now(),
                from: fromName,
                to: toName,
                message: message,
                image: uploadedImage,
                date: new Date().toLocaleString(),
                timestamp: Date.now()
            };
            
            saveWishLocally(wish);
            
            const shareUrl = window.location.origin + window.location.pathname + '?wish=' + wish.id;
            document.getElementById('share-link').textContent = shareUrl;
            
            document.getElementById('form-card').style.display = 'none';
            document.getElementById('success-card').style.display = 'block';
            
            updateStats();
        }

        function copyLink() {
            const link = document.getElementById('share-link').textContent;
            navigator.clipboard.writeText(link).then(() => {
                alert('Link copied to clipboard!');
            });
        }

        function shareWhatsApp() {
            const link = document.getElementById('share-link').textContent;
            const text = 'üéâ You have a special birthday wish! Click to see: ' + link;
            window.open('https://wa.me/?text=' + encodeURIComponent(text), '_blank');
        }

        function createAnother() {
            document.getElementById('form-card').style.display = 'block';
            document.getElementById('success-card').style.display = 'none';
            document.getElementById('fromName').value = '';
            document.getElementById('toName').value = '';
            document.getElementById('message').value = '';
            document.getElementById('birthdayImage').value = '';
            uploadedImage = null;
            document.getElementById('upload-placeholder').style.display = 'block';
            document.getElementById('image-preview').style.display = 'none';
        }

        function updateStats() {
            const totalElement = document.getElementById('total-wishes');
            if (totalElement) totalElement.textContent = wishes.length;
        }

        function displayWishes() {
            const container = document.getElementById('wishes-container');
            const countElement = document.getElementById('wishes-count');
            
            countElement.textContent = wishes.length + ' wishes shared';
            
            if (wishes.length === 0) {
                container.innerHTML = '<div class="empty-state"><i class="fas fa-birthday-cake"></i><h3>No wishes yet</h3><p>Be the first to create a birthday wish!</p></div>';
                return;
            }
            
            let html = '';
            wishes.forEach(wish => {
                html += '<div class="wish-card">';
                html += '<div class="wish-header">';
                html += '<div class="wish-from-to"><i class="fas fa-user"></i> ' + wish.from + ' <i class="fas fa-arrow-right" style="margin: 0 10px; color: #667eea;"></i> <i class="fas fa-birthday-cake"></i> ' + wish.to + '</div>';
                html += '<div class="wish-date"><i class="fas fa-clock"></i> ' + wish.date + '</div>';
                html += '</div>';
                html += '<div class="wish-message">"' + wish.message + '"</div>';
                html += '</div>';
            });
            container.innerHTML = html;
        }

        function showCelebration(wish) {
            const imageSection = wish.image ? '<div style="margin: 20px 0; animation: photoFloat 3s ease-in-out infinite;"><img src="' + wish.image + '" style="width: 200px; height: 200px; border-radius: 50%; object-fit: cover; border: 5px solid rgba(255,255,255,0.8); box-shadow: 0 10px 30px rgba(0,0,0,0.3); animation: glow 2s ease-in-out infinite alternate;" alt="Birthday Person"></div>' : '';
            
            document.body.innerHTML = '<div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57); background-size: 400% 400%; animation: gradientShift 3s ease infinite; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 10000; overflow: hidden; padding: 20px;"><canvas id="fireworks" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></canvas><div style="text-align: center; z-index: 2; color: white; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); animation: fadeInUp 2s ease; max-width: 90vw;"><div style="font-size: clamp(2rem, 5vw, 3rem); margin-bottom: 10px;">‚ú®üéâ‚ú®</div>' + imageSection + '<h1 style="font-family: \'Brush Script MT\', cursive; font-size: clamp(2.5rem, 8vw, 5rem); margin: 10px 0; animation: bounce 2s ease infinite;">Happy Birthday</h1><h2 style="font-family: \'Poppins\', sans-serif; font-size: clamp(2rem, 6vw, 4rem); margin: 20px 0; font-weight: 700; animation: glow 2s ease-in-out infinite alternate;">' + wish.to + '!</h2><div style="background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 30px; border-radius: 20px; margin: 30px auto; max-width: 600px; animation: slideIn 1.5s ease;"><div style="font-size: clamp(1.5rem, 4vw, 2.5rem); margin-bottom: 15px;">üéÇüéÅüéÇ</div><p style="font-size: clamp(1.2rem, 3vw, 1.8rem); font-style: italic; margin-bottom: 20px; line-height: 1.6;">"' + wish.message + '"</p><p style="font-size: clamp(1rem, 2.5vw, 1.4rem); font-weight: 600;">- From ' + wish.from + ' ‚ù§Ô∏è</p></div><div style="font-size: clamp(4rem, 10vw, 8rem); animation: cakeFloat 3s ease-in-out infinite; margin: 30px 0;">üéÇ</div><button onclick="window.location.href = window.location.origin + window.location.pathname" style="background: rgba(255,255,255,0.3); border: 2px solid white; color: white; padding: 15px 30px; border-radius: 50px; font-size: 1.2rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; margin-top: 20px;" onmouseover="this.style.background=\'rgba(255,255,255,0.5)\'" onmouseout="this.style.background=\'rgba(255,255,255,0.3)\'">üéâ Create Another Wish</button></div></div><style>@keyframes gradientShift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } } @keyframes fadeInUp { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } } @keyframes bounce { 0%, 20%, 50%, 80%, 100% { transform: translateY(0); } 40% { transform: translateY(-20px); } 60% { transform: translateY(-10px); } } @keyframes glow { from { text-shadow: 0 0 20px rgba(255,255,255,0.5); } to { text-shadow: 0 0 30px rgba(255,255,255,0.8), 0 0 40px rgba(255,255,255,0.6); } } @keyframes slideIn { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } } @keyframes cakeFloat { 0%, 100% { transform: translateY(0px) rotate(0deg); } 50% { transform: translateY(-20px) rotate(5deg); } } @keyframes photoFloat { 0%, 100% { transform: translateY(0px) scale(1); } 50% { transform: translateY(-10px) scale(1.05); } }</style>';
            
            setTimeout(() => {
                const canvas = document.getElementById('fireworks');
                const ctx = canvas.getContext('2d');
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                
                const particles = [];
                
                function createFirework() {
                    const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3', '#54a0ff'];
                    for(let i = 0; i < 30; i++) {
                        particles.push({
                            x: Math.random() * canvas.width,
                            y: Math.random() * canvas.height,
                            vx: (Math.random() - 0.5) * 8,
                            vy: (Math.random() - 0.5) * 8,
                            color: colors[Math.floor(Math.random() * colors.length)],
                            size: Math.random() * 4 + 1,
                            life: 1
                        });
                    }
                }
                
                function animate() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    
                    for(let i = particles.length - 1; i >= 0; i--) {
                        const p = particles[i];
                        p.x += p.vx;
                        p.y += p.vy;
                        p.life -= 0.01;
                        p.vy += 0.1;
                        
                        ctx.save();
                        ctx.globalAlpha = p.life;
                        ctx.fillStyle = p.color;
                        ctx.beginPath();
                        ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                        ctx.fill();
                        ctx.restore();
                        
                        if(p.life <= 0) particles.splice(i, 1);
                    }
                    
                    if(particles.length > 0) requestAnimationFrame(animate);
                }
                
                setInterval(createFirework, 800);
                createFirework();
                animate();
                
                window.addEventListener('resize', () => {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                });
            }, 500);
        }

        const urlParams = new URLSearchParams(window.location.search);
        const wishId = urlParams.get('wish');

        loadWishes().then(() => {
            if (wishId) {
                const wish = wishes.find(w => w.id == wishId);
                if (wish) {
                    showCelebration(wish);
                } else {
                    showCelebration({
                        to: 'Friend',
                        message: 'Wishing you a wonderful birthday filled with happiness and joy!',
                        from: 'Someone Special'
                    });
                }
            }
        });
    </script>
</body>
</html>